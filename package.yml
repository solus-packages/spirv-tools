name       : spirv-tools
version    : '2021.1'
release    : 18
source     :
    - https://github.com/KhronosGroup/SPIRV-Tools/archive/refs/tags/v2021.1.tar.gz : bd42f6d766ac50f1a1ab46ce96d59e24ab28fb9779a71fccfa8bad760842c274
license    : Apache-2.0
component  : programming.tools
emul32     : yes
summary    : The SPIR-V Tools project provides an API and commands for processing SPIR-V modules
description: |
    The SPIR-V Tools project provides an API and commands for processing SPIR-V modules.
patterns   :
    - 32bit-devel : /usr/lib32/cmake
builddeps  :
    - spirv-headers
rundeps    :
    - devel : spirv-headers
setup      : |
    %patch -p1 < $pkgfiles/missing-soname.patch
    sed -i "s|@VERSION@|%version%|g" CMakeLists.txt
    %cmake_ninja -DCMAKE_INSTALL_LIBDIR=lib%LIBSUFFIX% \
        -DSPIRV-Headers_SOURCE_DIR=%PREFIX% -DBUILD_SHARED_LIBS=ON
build      : |
    %ninja_build
install    : |
    %ninja_install
